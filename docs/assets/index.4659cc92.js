var K=Object.defineProperty,U=Object.defineProperties;var G=Object.getOwnPropertyDescriptors;var T=Object.getOwnPropertySymbols;var J=Object.prototype.hasOwnProperty,Q=Object.prototype.propertyIsEnumerable;var X=(t,e,n)=>e in t?K(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,p=(t,e)=>{for(var n in e||(e={}))J.call(e,n)&&X(t,n,e[n]);if(T)for(var n of T(e))Q.call(e,n)&&X(t,n,e[n]);return t},w=(t,e)=>U(t,G(e));import{j as P,R as u,c as Z,a as ee}from"./vendor.5877809d.js";const te=function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))o(r);new MutationObserver(r=>{for(const i of r)if(i.type==="childList")for(const c of i.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&o(c)}).observe(document,{childList:!0,subtree:!0});function n(r){const i={};return r.integrity&&(i.integrity=r.integrity),r.referrerpolicy&&(i.referrerPolicy=r.referrerpolicy),r.crossorigin==="use-credentials"?i.credentials="include":r.crossorigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function o(r){if(r.ep)return;r.ep=!0;const i=n(r);fetch(r.href,i)}};te();const l=P.exports.jsx,q=P.exports.jsxs,S={width:"1em",fill:"currentColor"},O={star(t=S){return l("svg",w(p({},t),{viewBox:"0 0 1024 1024",xmlns:"http://www.w3.org/2000/svg",children:l("path",{d:"M337.99705893 686.00294107L8.77812571 500.81729134l321.34630586-170.69285977L500.81729134 8.77812571l185.18564973 329.21893322 329.21893322 185.18564973-321.34630586 170.69285977-170.69285977 321.34630586z"})}))},loading(t=S){return l("svg",w(p({},t),{className:"spin",viewBox:"0 0 1024 1024",xmlns:"http://www.w3.org/2000/svg",children:l("path",{d:"M980.752 313.697c-25.789-60.972-62.702-115.725-109.713-162.736-47.012-47.011-101.764-83.924-162.736-109.713C645.161 14.542 578.106 1 509 1c-2.242 0-4.48 0.015-6.715 0.043-16.567 0.211-29.826 13.812-29.615 30.38 0.209 16.438 13.599 29.618 29.99 29.618l0.39-0.002c1.98-0.026 3.963-0.039 5.95-0.039 61.033 0 120.224 11.947 175.93 35.508 53.82 22.764 102.162 55.359 143.683 96.879s74.115 89.862 96.88 143.683C949.054 392.776 961 451.967 961 513c0 16.568 13.432 30 30 30s30-13.432 30-30c0-69.106-13.541-136.162-40.248-199.303z"})}))},refresh(t=S){return l("svg",w(p({},t),{viewBox:"0 0 1024 1024",xmlns:"http://www.w3.org/2000/svg",children:l("path",{d:"M512 93.76517199a418.23482801 418.23482801 0 1 0 372.64723175 608.28073384 41.82348279 41.82348279 0 0 1 74.44579937 38.14301631 501.88179362 501.88179362 0 1 1-80.13379301-570.63959931l63.57169383-63.57169385A41.82348279 41.82348279 0 0 1 1013.88179362 135.58865479l1e-8 167.29393122a41.65618887 41.65618887 0 0 1-41.82348284 41.82348278L804.76437961 344.70606879a41.65618887 41.65618887 0 0 1-29.61102582-71.43450861l44.58383266-44.58383267A417.73294619 417.73294619 0 0 0 512 93.76517199z"})}))}};function V(t){return new Promise((e,n)=>{const o=new Image;o.onload=()=>{e(o)},o.onerror=()=>{throw n(),new Error("image error")},o.src=t,o.crossOrigin="anonymous"})}function R(t,e,n=2){const o=t*1e3/(e*1e3);return n?Number(o.toFixed(n)):o}function W({clientX:t,sliderWidth:e,excursion:n,sliderBtnWidth:o,contentDom:r}){const{x:i,width:c}=r.getBoundingClientRect();let m=t-n+o/2-e/2-i;return m<0?m=0:m>c-e&&(m=c-e),m}const z={type:"slider",result:void 0,message:void 0};function ne({width:t,sliderImage:e,backgroundImage:n,pointY:o,onMoveEnd:r,onRefresh:i}){const c=u.useRef(null),m=u.useRef(null),[f,k]=u.useState(),[s,N]=u.useState(),[y,E]=u.useState(0),[L,b]=u.useState(z);u.useEffect(()=>{n&&!f&&V(n).then(d=>k(R(d.width,t)))},[n,f,t]);const B=u.useCallback(()=>{b(z),E(0)},[]);u.useEffect(()=>{n&&B()},[n,B]),u.useEffect(()=>{f&&e&&V(e).then(d=>{N({width:R(d.width,f),height:R(d.height,f),top:R(o,f)})})},[o,f,e]);const j=u.useMemo(()=>{const d=c.current;return!(s==null?void 0:s.width)||!d?0:(s.width-d.offsetWidth)/2+y},[c,y,s==null?void 0:s.width]);function M(d){f&&(b({type:"verifying",result:void 0,message:void 0}),r({left:d,ratio:f},({result:g,message:v})=>{b({type:"end",result:g,message:v})}))}function h(d){if(L.type!=="slider")return;const g=m.current,v=c.current;if(!v||!g)return;const{x:D,width:I}=v.getBoundingClientRect(),$=d.clientX-D;let x=y;document.onmousemove=A=>{const{clientX:C}=A;x=W({clientX:C,sliderWidth:(s==null?void 0:s.width)||0,excursion:$,contentDom:g,sliderBtnWidth:I}),E(x),document.onmouseup=()=>{document.onmousemove=null,document.onmouseup=null,M(x)}}}function H(d){if(L.type!=="slider")return;const g=m.current,v=c.current;if(!g||!v)return;const{x:D,width:I}=v.getBoundingClientRect(),$=d.touches[0].clientX-D;let x=y;document.ontouchmove=A=>{const{clientX:C}=A.touches[0];x=W({clientX:C,sliderWidth:(s==null?void 0:s.width)||0,excursion:$,contentDom:g,sliderBtnWidth:I}),E(x),document.ontouchend=()=>{document.ontouchmove=null,document.ontouchend=null,M(x)}}}return{ratio:f,sliderStyle:s,sliderLeft:y,sliderBtnRef:c,contentRef:m,onMouseDown:h,onTouchStart:H,sliderBtnLeft:j,verify:L,reset:B}}const Y={"primary-color":"#f7ca0c","primary-light-color":"#ffe578","success-color":"#22c55e","error-color":"#ef4444"};function se(t){u.useEffect(()=>{if(t!=="unset"){let e=Y;t!=="default"&&(e=p(p({},Y),t)),Object.keys(e).forEach(o=>{document.documentElement.style.setProperty(`--slider-${o}`,e[o])})}},[t])}const a="image-slider",_=`${a}-result-message-move`;function oe({width:t,height:e,backgroundImage:n,sliderImage:o,pointY:r,onMoveEnd:i,onRefresh:c,sliderTips:m="\u5411\u53F3\u6ED1\u52A8\u6ED1\u5757\u586B\u5145\u62FC\u56FE",theme:f="default"}){const k=u.useRef(null),{verify:s,sliderStyle:N,sliderLeft:y,sliderBtnRef:E,contentRef:L,onMouseDown:b,onTouchStart:B,sliderBtnLeft:j,reset:M}=ne({width:t,height:e,backgroundImage:n,sliderImage:o,pointY:r,onMoveEnd:i,onRefresh:c});return se(f),u.useEffect(()=>{const h=k.current;s.type==="end"&&h&&h.classList.add(_)},[s.result,s.type]),u.useEffect(()=>{const h=k.current;h&&(h.onanimationend=()=>{h.classList.remove(_),s.type==="end"&&(s.result==="error"?c():M())})},[c,M,s.result,s.type]),q("div",{className:a,children:[q("div",{ref:L,className:`${a}-content`,style:{height:e,width:t},children:[l("img",{className:`${a}-slider-image`,src:o,style:w(p({},N),{left:y}),alt:""}),l("img",{className:`${a}-background-image`,src:n,alt:""}),l("button",{onClick:c,type:"button",className:`${a}-refresh-btn`,children:O.refresh()}),l("div",{ref:k,className:Z(`${a}-result-message`,{[`${a}-result-message-success`]:s.result==="success",[`${a}-result-message-error`]:s.result==="error"}),children:s.message})]}),q("div",{className:`${a}-line`,children:[l("div",{style:{width:j},className:`${a}-line-active`}),l("div",{className:`${a}-line-label`,children:m}),l("button",{disabled:s.type!=="slider",type:"button",style:{left:j},ref:E,className:`${a}-slider-btn`,onMouseDown:b,onTouchStart:B,children:s.type==="verifying"?O.loading():O.star()})]})]})}const F=[{backgroundImage:"https://cdn.linghemedia.com.cn/ihost/kxef/7buqnt5bkxefel12uro7kmt25fk.jpg",sliderImage:"https://cdn.linghemedia.com.cn/ihost/kxef/j5fhfuawkxeffw96nu3xx3ksu4.png",pointY:97},{backgroundImage:"https://cdn.linghemedia.com.cn/ihost/kxfh/xmj7gj5ckxfhwhoxuk56q6h7ma7.jpg",sliderImage:"https://cdn.linghemedia.com.cn/ihost/kxfh/87kbhmc2kxfhwhox5bryg565fbo.png",pointY:273},{backgroundImage:"https://cdn.linghemedia.com.cn/ihost/kxfh/aah2tdp1kxfhyitntkqxfkzqpai.jpg",sliderImage:"https://cdn.linghemedia.com.cn/ihost/kxfh/yhryhqd6kxfhyitnu3xtf4rhet.png",pointY:32},{backgroundImage:"https://cdn.linghemedia.com.cn/ihost/kxfi/6kxqjd4ukxfi0q8wh9kbt2elmt5.jpg",sliderImage:"https://cdn.linghemedia.com.cn/ihost/kxfi/9nfetj9akxfi0q8weydqyrbtohm.png",pointY:350}];function re(){const[t,e]=u.useState(F[Math.floor(Math.random()*F.length)]);function n(){e(F[Math.floor(Math.random()*F.length)])}function o(r,i){console.log("move end",r),setTimeout(()=>{Math.random()<.5?i({result:"success",message:"\u4F60\u53EF\u771F\u806A\u660E\u5440\uFF01"}):i({result:"error",message:"\u518D\u52AA\u529B\u8BD5\u4E00\u4E0B\uFF1F"})},2e3)}return l(oe,w(p({},t),{width:300,height:169,onMoveEnd:o,onRefresh:n}))}ee.render(l(re,{}),document.getElementById("root"));
